# üõí Sistema E-commerce - TechStore Brasil

> Projeto completo de modelagem de banco de dados para sistema de e-commerce desenvolvido como Avalia√ß√£o Final da disciplina de Modelagem de Banco de Dados.

---

## üìã Informa√ß√µes do Projeto

**Aluno:** Pedro Henrique Alves  
**Curso:** DSM 1¬∫ Semestre  
**Disciplina:** Banco de Dados  
**Professor:** Marcio Maestrelo Funes  
**Institui√ß√£o:** FATEC Franca  
**Data:** Dezembro de 2024

---

## üìë √çndice

- [Sobre o Projeto](#-sobre-o-projeto)
- [Cen√°rio](#-cen√°rio)
- [Modelagem Conceitual](#-modelagem-conceitual-der)
- [Modelagem L√≥gica](#-modelagem-l√≥gica)
- [Modelagem F√≠sica](#-modelagem-f√≠sica)
- [Dados](#-dados)
- [CRUD](#-crud)
- [Relat√≥rios](#-relat√≥rios)
- [Como Executar](#-como-executar)
- [Tecnologias](#-tecnologias)
- [Estrutura do Reposit√≥rio](#-estrutura-do-reposit√≥rio)

---

## üéØ Sobre o Projeto

Este projeto apresenta a modelagem completa de um banco de dados relacional para um sistema de e-commerce fict√≠cio chamado **TechStore Brasil**, uma loja virtual especializada em produtos eletr√¥nicos e tecnologia.

O trabalho abrange todas as etapas da modelagem de banco de dados:
- An√°lise de requisitos e cria√ß√£o de cen√°rio
- Modelagem conceitual (DER)
- Modelagem l√≥gica (tabelas, relacionamentos, normaliza√ß√£o)
- Modelagem f√≠sica (implementa√ß√£o em SQL)
- Opera√ß√µes CRUD
- Consultas e relat√≥rios gerenciais

---

## üè¢ Cen√°rio

### **Empresa: TechStore Brasil**

A TechStore Brasil √© uma loja virtual especializada na venda de produtos eletr√¥nicos e tecnologia. Fundada em 2020, a empresa come√ßou como uma pequena loja f√≠sica em S√£o Paulo e expandiu suas opera√ß√µes para o ambiente online devido √† alta demanda.

### **Problema Identificado**

A empresa utilizava planilhas do Excel para controlar vendas, estoque e cadastro de clientes, o que gerava:

- ‚ùå Perda de informa√ß√µes importantes
- ‚ùå Dificuldade em rastrear pedidos
- ‚ùå Impossibilidade de gerar relat√≥rios de vendas precisos
- ‚ùå Falta de controle de estoque em tempo real
- ‚ùå Dificuldade em gerenciar relacionamento com fornecedores

### **Solu√ß√£o Proposta**

Desenvolvimento de um sistema de banco de dados robusto que permite:

- ‚úÖ Cadastro completo de clientes com m√∫ltiplos endere√ßos e contatos
- ‚úÖ Gest√£o de produtos com categorias e fornecedores
- ‚úÖ Controle de pedidos e itens vendidos
- ‚úÖ Sistema de avalia√ß√µes de produtos
- ‚úÖ Relat√≥rios gerenciais para tomada de decis√£o
- ‚úÖ Controle de estoque automatizado

### **Entidades do Sistema**

1. **CLIENTES** - Cadastro dos compradores
2. **EMAILS_CLIENTES** - Emails dos clientes (atributo multivalorado)
3. **ENDERECOS** - Endere√ßos de entrega
4. **CATEGORIAS** - Classifica√ß√£o dos produtos
5. **FORNECEDORES** - Empresas fornecedoras
6. **PRODUTOS** - Itens dispon√≠veis para venda
7. **PEDIDOS** - Compras realizadas
8. **ITENS_PEDIDO** - Produtos de cada pedido (relacionamento N:N)
9. **AVALIACOES** - Avalia√ß√µes dos produtos

---

## üìê Modelagem Conceitual (DER)

### Diagrama Entidade-Relacionamento

![DER - Sistema E-commerce](./diagramas/der_ecommerce.png)

### Relacionamentos Implementados

| Origem | Cardinalidade | Destino | Tipo |
|--------|---------------|---------|------|
| CLIENTES | 1:N | EMAILS_CLIENTES | Um para Muitos |
| CLIENTES | 1:N | ENDERECOS | Um para Muitos |
| CLIENTES | 1:N | PEDIDOS | Um para Muitos |
| CLIENTES | 1:N | AVALIACOES | Um para Muitos |
| CATEGORIAS | 1:N | PRODUTOS | Um para Muitos |
| FORNECEDORES | 1:N | PRODUTOS | Um para Muitos |
| PEDIDOS | 1:N | ITENS_PEDIDO | Um para Muitos |
| PRODUTOS | 1:N | ITENS_PEDIDO | Um para Muitos |
| PRODUTOS | 1:N | AVALIACOES | Um para Muitos |
| **PEDIDOS** | **N:N** | **PRODUTOS** | **Muitos para Muitos** |

### Tipos de Atributos

‚úÖ **Atributos Simples:** nome_produto, cpf, cnpj, status, nota  
‚úÖ **Atributos Compostos:** endereco_completo (decomposto em rua, numero, complemento, bairro, cidade, estado, cep)  
‚úÖ **Atributos Multivalorados:** emails (tabela EMAILS_CLIENTES)  
‚úÖ **Atributos Derivados:** idade, valor_total, subtotal, media_avaliacoes  
‚úÖ **Chaves Prim√°rias:** Todas as entidades possuem  

---

## üßÆ Modelagem L√≥gica

A documenta√ß√£o completa da Modelagem L√≥gica est√° dispon√≠vel em:

üìÑ **[Modelagem_Logica_TechStore_FINAL.pdf](./Modelagem_Logica_TechStore_FINAL.pdf)**

### Resumo das Tabelas

**9 Tabelas Implementadas:**

1. `CLIENTES` - Dados dos clientes
2. `EMAILS_CLIENTES` - M√∫ltiplos emails por cliente
3. `ENDERECOS` - Endere√ßos de entrega
4. `CATEGORIAS` - Categorias de produtos
5. `FORNECEDORES` - Fornecedores de produtos
6. `PRODUTOS` - Cat√°logo de produtos
7. `PEDIDOS` - Pedidos realizados
8. `ITENS_PEDIDO` - Itens de cada pedido
9. `AVALIACOES` - Avalia√ß√µes de produtos

### Normaliza√ß√£o

O banco de dados est√° na **3¬™ Forma Normal (3FN)**:
- ‚úÖ **1FN:** Todos os atributos s√£o at√¥micos
- ‚úÖ **2FN:** N√£o h√° depend√™ncias parciais
- ‚úÖ **3FN:** N√£o h√° depend√™ncias transitivas

---

## üß± Modelagem F√≠sica

### Scripts SQL Implementados

O projeto cont√©m 4 scripts SQL principais:

1. **[01_create_tables.sql](./scripts/01_create_tables.sql)** - Cria√ß√£o de todas as tabelas com constraints e √≠ndices
2. **[02_insert_data_FIXED.sql](./scripts/02_insert_data_FIXED.sql)** - Inser√ß√£o de dados (7.120 registros)
3. **[03_crud_operations.sql](./scripts/03_crud_operations.sql)** - Exemplos de opera√ß√µes CRUD
4. **[04_reports.sql](./scripts/04_reports.sql)** - 10 consultas SQL para relat√≥rios

### Constraints Implementadas

- **PRIMARY KEY:** Identificadores √∫nicos em todas as tabelas
- **FOREIGN KEY:** Relacionamentos entre tabelas
- **UNIQUE:** CPF, CNPJ, Email, Nome de Categoria
- **CHECK:** Valida√ß√µes (pre√ßo positivo, nota entre 1-5, formato de CPF/CNPJ)
- **NOT NULL:** Campos obrigat√≥rios
- **DEFAULT:** Valores padr√£o

### √çndices para Otimiza√ß√£o

Foram criados 16 √≠ndices para otimizar consultas em:
- Chaves estrangeiras
- Campos de busca frequente (CPF, nome, data)
- Campos de filtro (status, ativo)

---

## üìä Dados

### Quantidade de Registros

| Tabela | Registros |
|--------|-----------|
| CLIENTES | 500 |
| EMAILS_CLIENTES | 1.000 |
| ENDERECOS | 750 |
| CATEGORIAS | 20 |
| FORNECEDORES | 50 |
| PRODUTOS | 1.000 |
| PEDIDOS | 800 |
| ITENS_PEDIDO | 2.500 |
| AVALIACOES | 1.500 |
| **TOTAL** | **7.120** |

### Gera√ß√£o de Dados

Os dados foram gerados utilizando:
- Fun√ß√£o `generate_series()` do PostgreSQL
- Dados fict√≠cios realistas e coerentes com o cen√°rio
- Distribui√ß√£o aleat√≥ria mas controlada

---

## üîÑ CRUD

### Opera√ß√µes Implementadas

O arquivo `03_crud_operations.sql` cont√©m exemplos completos de:

#### **CREATE (Inser√ß√£o)**
```sql
INSERT INTO clientes (nome_completo, cpf, data_nascimento)
VALUES ('Roberto Mendes Junior', '123.456.789-00', '1990-05-15')
RETURNING *;
```

#### **READ (Consulta)**
```sql
SELECT c.nome_completo, c.cpf, e.email
FROM clientes c
INNER JOIN emails_clientes e ON c.id_cliente = e.id_cliente
WHERE c.id_cliente = 1;
```

#### **UPDATE (Atualiza√ß√£o)**
```sql
UPDATE pedidos
SET status = 'ENVIADO'
WHERE id_pedido = 1
RETURNING *;
```

#### **DELETE (Exclus√£o)**
```sql
DELETE FROM avaliacoes
WHERE id_avaliacao = 100
RETURNING *;
```

### Prints das Opera√ß√µes

Os prints das opera√ß√µes CRUD executadas est√£o em:

üìÅ **[/prints/crud/](./prints/crud/)**

- `01_create.png` - Opera√ß√£o de inser√ß√£o
- `02_read.png` - Opera√ß√£o de consulta
- `03_update.png` - Opera√ß√£o de atualiza√ß√£o
- `04_delete.png` - Opera√ß√£o de exclus√£o

---

## üìà Relat√≥rios

### 10 Consultas SQL Implementadas

#### **1. Top 10 Clientes que Mais Compraram**
Identifica os melhores clientes por valor total gasto.

#### **2. Produtos Mais Vendidos**
Lista produtos campe√µes de venda com receita total.

#### **3. Vendas por Categoria**
Analisa performance das categorias de produtos.

#### **4. An√°lise de Pedidos por Status**
Acompanha distribui√ß√£o dos pedidos por status.

#### **5. Produtos com Baixo Estoque**
Identifica produtos que precisam de reposi√ß√£o.

#### **6. Faturamento por Per√≠odo**
Mostra evolu√ß√£o das vendas nos √∫ltimos 12 meses.

#### **7. Avalia√ß√µes de Produtos**
Lista produtos melhor e pior avaliados.

#### **8. Performance dos Fornecedores**
Avalia fornecedores por vendas e avalia√ß√µes.

#### **9. An√°lise de Formas de Pagamento**
Entende prefer√™ncias de pagamento dos clientes.

#### **10. Clientes por Localiza√ß√£o**
Identifica distribui√ß√£o geogr√°fica dos clientes.

### Prints dos Relat√≥rios

Os prints dos relat√≥rios executados est√£o em:

üìÅ **[/prints/relatorios/](./prints/relatorios/)**

### Recursos SQL Utilizados

‚úÖ SELECT com m√∫ltiplas tabelas  
‚úÖ WHERE com filtros complexos  
‚úÖ JOIN (INNER, LEFT)  
‚úÖ GROUP BY e agrega√ß√µes (SUM, AVG, COUNT)  
‚úÖ ORDER BY para ordena√ß√£o  
‚úÖ HAVING para filtrar grupos  
‚úÖ Subconsultas  
‚úÖ Fun√ß√µes de janela (OVER)  
‚úÖ CASE WHEN  

---

## üöÄ Como Executar

### Pr√©-requisitos

- Conta no [Supabase](https://supabase.com) (gratuita)
- Navegador web

### Passo a Passo

1. **Acesse o Supabase**
   - Fa√ßa login em https://supabase.com
   - Crie um novo projeto

2. **Execute os scripts na ordem**
   
   Abra o SQL Editor do Supabase e execute:
   
   **a)** `01_create_tables.sql` - Cria as tabelas
   
   **b)** `02_insert_data_FIXED.sql` - Insere os dados
   
   **c)** `03_crud_operations.sql` - (Opcional) Testa opera√ß√µes CRUD
   
   **d)** `04_reports.sql` - Executa os relat√≥rios

3. **Verifique os dados**
   ```sql
   SELECT 'clientes' AS tabela, COUNT(*) AS total FROM clientes
   UNION ALL
   SELECT 'produtos', COUNT(*) FROM produtos;
   ```

---

## üíª Tecnologias

- **PostgreSQL 15** - Sistema de gerenciamento de banco de dados
- **Supabase** - Plataforma de banco de dados como servi√ßo
- **SQL** - Linguagem de consulta estruturada
- **Draw.io** - Cria√ß√£o do DER

---

## üìÅ Estrutura do Reposit√≥rio

```
ecommerce-techstore-database/
‚îÇ
‚îú‚îÄ‚îÄ diagramas/
‚îÇ   ‚îî‚îÄ‚îÄ der_ecommerce.png
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ 01_create_tables.sql
‚îÇ   ‚îú‚îÄ‚îÄ 02_insert_data_FIXED.sql
‚îÇ   ‚îú‚îÄ‚îÄ 03_crud_operations.sql
‚îÇ   ‚îî‚îÄ‚îÄ 04_reports.sql
‚îÇ
‚îú‚îÄ‚îÄ prints/
‚îÇ   ‚îú‚îÄ‚îÄ crud/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 01_create.png
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 02_read.png
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 03_update.png
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 04_delete.png
‚îÇ   ‚îî‚îÄ‚îÄ relatorios/
‚îÇ       ‚îú‚îÄ‚îÄ relatorio_01_top_clientes.png
‚îÇ       ‚îú‚îÄ‚îÄ relatorio_02_produtos_vendidos.png
‚îÇ       ‚îú‚îÄ‚îÄ relatorio_03_vendas_categoria.png
‚îÇ       ‚îú‚îÄ‚îÄ relatorio_04_pedidos_status.png
‚îÇ       ‚îî‚îÄ‚îÄ relatorio_05_avaliacoes.png
‚îÇ
‚îú‚îÄ‚îÄ Modelagem_Logica_TechStore_FINAL.pdf
‚îî‚îÄ‚îÄ README.md
```

---

## ‚úÖ Requisitos Atendidos

- [x] Cen√°rio detalhado com problema e solu√ß√£o
- [x] M√≠nimo de 5 entidades (9 criadas)
- [x] Atributo Simples
- [x] Atributo Composto (endereco_completo)
- [x] Atributo Multivalorado (emails)
- [x] Atributo Derivado (idade, valor_total, subtotal)
- [x] Chave Prim√°ria em todas as tabelas
- [x] Relacionamento 1:1
- [x] Relacionamento 1:N (m√∫ltiplos)
- [x] Relacionamento N:N (PEDIDOS ‚Üî PRODUTOS)
- [x] Modelagem Conceitual (DER)
- [x] Modelagem L√≥gica
- [x] Modelagem F√≠sica (scripts SQL)
- [x] 500+ registros em cada tabela
- [x] Opera√ß√µes CRUD completas
- [x] 10 consultas SQL com relat√≥rios

---

## üë®‚Äçüíª Autor

**Pedro Henrique Alves**

- GitHub: [@pedrohenriqueff90](https://github.com/pedrohenriqueff90)
- Email: pedrohenrique.alves@fatec.sp.gov.br

---

## üìÑ Licen√ßa

Este projeto foi desenvolvido como trabalho acad√™mico para a disciplina de Modelagem de Banco de Dados da FATEC Franca.

---

## üôè Agradecimentos

Agrade√ßo ao professor Marcio Maestrelo Funes pela orienta√ß√£o durante o desenvolvimento deste projeto e aos colegas de turma pelas discuss√µes e aprendizados compartilhados.

---

<div align="center">
  <strong>Desenvolvido com üíô por Pedro Henrique Alves</strong>
</div>